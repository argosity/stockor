<%
groups = []
groups.push(
  { title: 'Labor', lines: @invoice.lines.time_entry,
    footer: 'inv_lines_labor_group_footer' }
) if @invoice.lines.time_entry.any?
groups.push(
  { title: 'Non Labor', lines: @invoice.lines.product }
) if @invoice.lines.product.any?
-%>
\setlength{\LTpre}{0pt}
\begin{document}
<%= partial( 'header', {
  location: @invoice.location, date: @invoice.invoice_date,
  form_title: "Invoice # #{@invoice.visible_id}"
} ) %>
\textbf{Invoice To:}
\medskip
\hspace*{3ex}{
<%=partial 'address', :address=>@invoice.billing_address %>
\medskip
<%=partial 'inv_info_line', invoice: @invoice -%>
<%=partial 'inv_lines', invoice: @invoice, lines: @invoice.lines.regular,
    footer: groups.many? ? false : 'labor_lines_footer',
    groups: groups.many? ? groups : false %>
\end{document}
